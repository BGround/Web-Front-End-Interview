# 浏览器工作原理及实践 知识点总结

本部分主要是笔者在复习 浏览器工作原理及实践 相关知识和一些相关面试题时所做的笔记，如果出现错误，希望大家指出！

![浏览器工作原理框架图](https://static001.geekbang.org/resource/image/33/4d/334170a8e1d1ef1935191fc4a0f94b4d.png)



## 声明
此模块是学习极客时间《浏览器工作原理与实践》所做的笔记,系统学习浏览器,把网络、页面、渲染、JavaScript、浏览器安全知识串联起来。

### 目录
- [1.Chrome架构:仅仅打开了1个页面,为什么有4个进程？](#1-Chrome架构)

- [7.从输入URL到页面展示，中间发生了什么](#7-从输入URL到页面展式-中间发生了什么)
- [8.浏览器的数据存储方式](#8-浏览器的数据存储方式)
- [9.浏览器的缓存](#9-浏览器的缓存)
- [10.重绘和回流](#10-重绘和回流)
- 
- 
- 
- 
- 
- 
- 
- 



### 1. Chrome架构
**线程 VS 进程**

多线程可以并行处理任务，但是**线程是不能单独存在的，它是由进程来启动和管理的。**
那什么又是进程呢？**一个进程就是一个程序的运行实例。**详细解释就是，启动一个程序的时候，操作系统会为该程序创建一块内存，用来存放代码、运行中的数据和一个执行任务的主线程，我们把这样的一个运行环境叫进程。

发展过程
早期单进程架构
不稳定
不流畅
不安全
早期多进程架构：主进程，渲染进程（渲染引擎webkit），插件进程
现代多进程架构：主进程，渲染进程（webkit改成了blink），插件进程，GPU进程，网络进程
未来：面向服务架构

思考题：
(1)多进程架构中，我偶尔还会碰到一些由于单个页面卡死最终崩溃导致所有页面崩溃的情况，请问这是什么原因呢?
(2)单进程浏览器开多个页面，渲染线程也只有一个吗？感觉一个页面开一个线程不是更合理吗？
(3)如果打开了 2个页面，会有几个进程呢？是 1 个网络进程、1 个浏览器进程、1 个 GPU 进程以及 2个渲染进程，共 5个吗？这些进程是可以在浏览器开发者中被实际观察到的吗？

**[:arrow_up: 返回目录](#目录)**


### 7. 从输入URL到页面展示，中间发生了什么

传送门：[]( )

**[:arrow_up: 返回目录](#目录)**

### 8. 浏览器的数据存储方式
浏览器存储数据主要有三种方式：cookie、localStorage、sessionStorage

**使用方面：**
cookie:是以对象的形式进行存储;
localStorage和sessionStorage: 他们都是以key/value的形式保存在浏览器的端中，

**区别方面：**
 - 1.是否与服务器端进行交互：
 cookie数据始终在同源的http请求中携带（即使不需要），即cookie在浏览器和服务器间来回传递；
 
 而sessionStorage和localStorage不会自动把数据发给服务器，仅在本地保存。
 
 - 2.数据有效期不同：
 sessionStorage仅在当前浏览器窗口关闭或刷新前有效，需要持久保存的数据自然也就不可能使用sessionStorage；
 
 localStorage保存数据始终有效，窗口或浏览器关闭也一直保存，因此可用作持久保存数据；
 
 cookie只在开发人员设置的有效期时间之前一直有效，即使窗口或浏览器关闭。
 
 - 3.存储大小限制：
 cookie存储的数据不能超过4k，同时因为每次http请求都会携带cookie，所以cookie只适合保存很小的数据，比如会话标识；
 
 sessionStorage和localStorage 虽然也有存储大小的限制，但比cookie大得多，可以达到5M或更大。
 
 PS：这三种存储方式都不能存储大量数据，这就产生了IndexedDB。它可以被网页脚本创建和操作，IndexedDB 允许储存大量数据，提供查找接口，还能建立索引，
 就数据库类型而言，IndexedDB 不属于关系型数据库（不支持 SQL 查询语句），更接近 NoSQL 数据库
 
 - 4.作用域不同：
 sessionStorage在不同的浏览器窗口中不能共享，即使是同源页面；
 
 localStorage 在所有浏览器的同源窗口中都是共享的；
 
 cookie也是在所有同源窗口中都是共享的。
 

![storage](https://github.com/BGround/Web-Front-End-Interview/tree/main/JavaScript/image/cookie-sessionStoge-LocalStorage.png)

**[:arrow_up: 返回目录](#目录)**


### 9. 浏览器的缓存
缓存分为两种：强缓存和协商缓存，它们是根据响应的header内容来决定的。
**强缓存**: 强缓存的字段有: expires，cache-control。如果expires和cache-control同时存在的话，cache-control优先级要高于expires
**协商缓存**: 协商缓存字段有Last-Modified/If-modified-since, Etag/If-None-Match

**[:arrow_up: 返回目录](#目录)**

### 10. 重绘和回流
主要是看是否影响render tree，在render tree中需要更新元素属性时，只是影响元素的外观，不影响布局，就是重绘


**[:arrow_up: 返回目录](#目录)**


